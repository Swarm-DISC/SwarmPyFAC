
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>API Reference &#8212; SwarmPyFAC 0.1.1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SwarmPyFAC 0.1.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<p>This page is a detailed API reference guide, where you can see what each function does, and how its api is set up.</p>
<div class="section" id="module-swarmpyfac.fac">
<span id="swarmpyfac-fac-module"></span><h2>swarmpyfac.fac module<a class="headerlink" href="#module-swarmpyfac.fac" title="Permalink to this headline">¶</a></h2>
<p>The fac module is used for calculated field alligned currents.</p>
<p>This module contains functions used to calculated field alligned currents,
and some of the components used in the calculations.
This module is dependent on the swarm_util module, which contains
functions for utilities and some of the more general components needed.</p>
<p>This module currently only allows caluculation of the single satelite
version of the FAC product, and it uses data available from viresclient’s
python client or another data source with similar format.
The major difference between this and the official ESA product,
is that the input from models are their effects at each measurement point,
since this is the format delivered by viresclient.</p>
<p>This means that there is a small algorithmic difference compared
to what is used in the official ESA products,
though experimental comparison have found the difference
to be less than  1.2*10^(-4) micro A/m^2, and the average
difference to be less than 1% of this.</p>
<p>Running this module as a script will (outside of running some tests)
perform the default experiment.</p>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>This section lists each of the functions in this module,
and give a short description of them.
You can use this as an easier way to look up what you might need.</p>
<dl class="docutils">
<dt>split_models</dt>
<dd>Takes measurements and up to several models,
and returns the combined model and the residual on the measurements.</dd>
<dt>radial_current</dt>
<dd>Calculate the radial currents for time-like series.</dd>
<dt>single_sat_fac</dt>
<dd>Calculate the field alligned currents
for a single satelinte on time-like series.</dd>
<dt>single_sat_fac_full</dt>
<dd>Like single_sat_fac, but it handles input from a dictionary,
and can figure out which models are pressent itself.</dd>
<dt>fetch_data</dt>
<dd>Fetch the data needed, and can figure out itself whether
it needs to download it first.</dd>
<dt>fac_from_file</dt>
<dd>Do the entire single satelite field alligned currents calculations,
but takes a possible file as input the same way as fetch_data.</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.fac</span> <span class="k">import</span> <span class="n">fac_from_file</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">date</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span><span class="p">,</span> <span class="n">input_data</span> <span class="o">=</span> <span class="n">fac_from_file</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="n">date</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">end</span><span class="o">=</span><span class="n">date</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">force_download</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lat</span><span class="p">,</span> <span class="n">fac</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">][:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<dl class="function">
<dt id="swarmpyfac.fac.fac_from_file">
<code class="descclassname">swarmpyfac.fac.</code><code class="descname">fac_from_file</code><span class="sig-paren">(</span><em>**options</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/fac.html#fac_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.fac.fac_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute FAC for a single satelite from data in an outside source.</p>
<p>This function is inteded as the topmost function of this module.
It is therefore suggested to just strait up use this function,
when one wants to use this as a module instead of as a script.</p>
<p>The function will read a cdf-file or download it,
if such a file is not already cached.
It will then calculate FAC (field aligned currents),
and other related measures, and return those results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>**options</strong> – options to be passed to other lower level function(s),
mainly fetch_data.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><em>The return is a tuple consiting of the following</em></li>
<li><strong>time</strong> (<em>ndarray</em>) – An ndarray of  scalars describing the time each point
in the calculations corrisond to.
Note that it is off compared to the parameter time.</li>
<li><strong>position</strong> (<em>ndarray</em>) – An ndarray of spherical coordinates describing the postion
of each point in the time series where the calculations
are suppose to apply at. The coordinates are arranged as
theta, phi, r.
Note tht this is off compared to the parameter positions.</li>
<li><strong>irc</strong> (<em>ndarray</em>) – An ndarray of vectors of the radial currents (the radial components,
of currents) found when solving one of Maxwells equations
on the magnetic field.
Note that this is given in the VSC (spacecraft velocity) frame.</li>
<li><strong>fac</strong> (<em>ndarray</em>) – An ndarray of vectors of the field alligned currents.
Note that this is given in the VSC (spacecraft velocity) frame.</li>
<li><strong>V</strong> (<em>ndarray</em>) – An ndarray of vectors of the velocity in the NEC frame.</li>
<li><strong>V_VSC</strong> (<em>ndarray</em>) – An ndarray of vectors of the velocity in the VSC frame.</li>
<li><strong>pos_ltl</strong> (<em>ndarray</em>) – An ndarray of scalars of positions where local time is acounted for.
Each position reference the same position as positions output.
Note tht this is off compared to the parameter positions.</li>
<li><em>inclination</em> – An ndarray of scalars of the inclination of the aproximation
of the magnetic field, where the calculations
are supposed to be applied at.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.fac</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fac_from_file</span><span class="p">()</span>  <span class="c1"># doctest: +ELLIPSIS, +SKIP</span>
<span class="go">(array([...]), array([[...]]), array([...]), array([...]), array([[...]]), array([[...]]), array([[...]]), array([...]))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.fac.fetch_data">
<code class="descclassname">swarmpyfac.fac.</code><code class="descname">fetch_data</code><span class="sig-paren">(</span><em>force_download=False</em>, <em>temp_file='tempdata.cdf'</em>, <em>**options</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/fac.html#fetch_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.fac.fetch_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch cdf form data from a file or by downloading it.</p>
<p>This function is made to hide the complexity of getting
data from a cdf file that you might need to download first.
The idea is a dowloaded file will be saved as some temporary file
temp_file and then opened.
If the file have already been downloaded then it will be assumed
that the file at temp_file is the one wanted, unless
force_download is set to true to indicate that this cache
should be flushed and overwritten by a new download.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>force_download</strong> (<em>boolean</em><em>, </em><em>optional</em>) – A flag on whether to force downloading of the data and
thereby overwrite the temp_file if it already exists.
If set to False the program will only download the data
if it cannot find the temp_file.
Default is False.</li>
<li><strong>temp_file</strong> (<em>string</em>) – A string of the file path for where the downloaded file should be.
If the file already exists then this may take priority
depending on the force_download flag.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A dictionary map of _name_pairings, where the values
have been replaced with the data entry of
the previous value.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.fac</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fetch_data</span><span class="p">()</span>  <span class="c1"># doctest: +ELLIPSIS, +SKIP</span>
<span class="go">{...}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.fac.radial_current">
<code class="descclassname">swarmpyfac.fac.</code><code class="descname">radial_current</code><span class="sig-paren">(</span><em>delta_B</em>, <em>velocity</em>, <em>delta_time</em>, <em>MU_0=1.2566370614359173e-06</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/fac.html#radial_current"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.fac.radial_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the radial curents (IRC) over a time series.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>delta_B</strong> (<em>ndarray</em>) – The change in the B (magnetic) field in a time series in
an ndarray of vectors.
Standard use requires this to be in the VSC frame.</li>
<li><strong>velocity</strong> (<em>ndarray</em>) – An ndarray of vectors of the spartial velocities
at each point in the timeseries.</li>
<li><strong>delta_time</strong> (<em>ndarray</em>) – An ndarray of scalars of the time steps between
each point in the timeseries of delta_B and velocity.</li>
<li><strong>MU_0</strong> (<em>float</em><em>, </em><em>optional</em>) – The constant of permubility of vacum, in the given units.
Defaults to swarm_util.MU_0, which assumes velocity
and delta_time are in base SI units, and delta_B in nT.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An ndarray of vectors, each of which describes
the radial current at the respective point in the timseries.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.fac</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vecs</span> <span class="o">=</span> <span class="n">sw</span><span class="o">.</span><span class="n">delta</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">radial_current</span><span class="p">(</span><span class="n">vecs</span><span class="p">,</span><span class="n">vecs</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vecs</span><span class="p">)))</span>
<span class="go">array([-0., -0., -0., -0.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">radial_current</span><span class="p">(</span><span class="n">vecs</span><span class="p">,</span> <span class="n">sw</span><span class="o">.</span><span class="n">pack_3d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,)),</span><span class="o">-</span><span class="mf">1.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,)),</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,))),</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vecs</span><span class="p">)))</span>
<span class="go">array([-1989.43678865, -1989.43678865, -1989.43678865, -1989.43678865])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.fac.single_sat_fac">
<code class="descclassname">swarmpyfac.fac.</code><code class="descname">single_sat_fac</code><span class="sig-paren">(</span><em>time</em>, <em>positions</em>, <em>B_res</em>, <em>B_model</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/fac.html#single_sat_fac"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.fac.single_sat_fac" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Field Aligned Currents on a single satelites path.</p>
<p>This function runs through the same logic as needed for the single
satelite version of the official FAC product.
This function is not designed to deal with data flaged in some way as bad.
There are several extra outputs usefull for debuging and comparisons.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>time</strong> (<em>ndarray</em>) – An array of scalars of time stamps in seconds.</li>
<li><strong>poisitions</strong> (<em>ndarray</em>) – An array of vectors (theta, phi,r) of the position of the
satelite in spherical coordinates.</li>
<li><strong>B_res</strong> (<em>ndarray</em>) – An array of vectors of the residual of the magnetic field
measurements after the model have been substracted.
The vectors are assumed to be in the NEC coordinate system.</li>
<li><strong>B_model</strong> (<em>ndarray</em>) – An array of vectors of the model of the magnetic field
at the point of measurements.
The vectors are assumed to be in the NEC coordinate system.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>The return is a tuple consiting of the following</em></li>
<li><strong>time</strong> (<em>ndarray</em>) – An ndarray of  scalars describing the time each point
in the calculations corrisond to.
Note that it is off compared to the parameter time.</li>
<li><strong>position</strong> (<em>ndarray</em>) – An ndarray of spherical coordinates describing the postion
of each point in the time series where the calculations
are suppose to apply at. The coordinates are arranged as
theta, phi, r.
Note tht this is off compared to the parameter positions.</li>
<li><strong>irc</strong> (<em>ndarray</em>) – An ndarray of vectors of the radial currents (the radial components,
of currents) found when solving one of Maxwells equations
on the magnetic field.
Note that this is given in the VSC (spacecraft velocity) frame.</li>
<li><strong>fac</strong> (<em>ndarray</em>) – An ndarray of vectors of the field alligned currents.
Note that this is given in the VSC (spacecraft velocity) frame.</li>
<li><strong>V</strong> (<em>ndarray</em>) – An ndarray of vectors of the velocity in the NEC frame.</li>
<li><strong>V_VSC</strong> (<em>ndarray</em>) – An ndarray of vectors of the velocity in the VSC frame.</li>
<li><strong>pos_ltl</strong> (<em>ndarray</em>) – An ndarray of scalars of positions where local time is acounted for.
Each position reference the same position as positions output.
Note tht this is off compared to the parameter positions.</li>
<li><em>inclination</em> – An ndarray of scalars of the inclination of the aproximation
of the magnetic field, where the calculations
are supposed to be applied at.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.fac</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">positions</span> <span class="o">=</span> <span class="n">sw</span><span class="o">.</span><span class="n">pack_3d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.01</span> <span class="o">*</span> <span class="n">time</span><span class="p">)</span><span class="o">*</span><span class="mi">90</span><span class="p">,(</span><span class="mf">0.01</span> <span class="o">*</span> <span class="n">time</span> <span class="o">%</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">/</span><span class="n">sw</span><span class="o">.</span><span class="n">TO_RADIANS</span> <span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B_res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">),</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span> <span class="n">sw</span><span class="o">.</span><span class="n">as_3d</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B_model</span> <span class="o">=</span> <span class="n">sw</span><span class="o">.</span><span class="n">as_3d</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">2</span><span class="p">])</span><span class="o">*</span><span class="n">sw</span><span class="o">.</span><span class="n">pack_3d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]),</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">)),</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">single_sat_fac</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="n">positions</span><span class="p">,</span><span class="n">B_res</span><span class="p">,</span><span class="n">B_model</span><span class="p">)</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">(array([...]), array([[...]]), array([...]), array([...]), array([[...]]), array([[...]]), array([[...]]), array([...]))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.fac.single_sat_fac_full">
<code class="descclassname">swarmpyfac.fac.</code><code class="descname">single_sat_fac_full</code><span class="sig-paren">(</span><em>input_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/fac.html#single_sat_fac_full"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.fac.single_sat_fac_full" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Field Aligned Currents on a single satelites path.</p>
<p>This is mainly designed as a wrapper for single_sat_fac,
which can extract the relevant parameters from a dictionary</p>
<p>This function runs through the same logic as needed for the single
satelite version of the official FAC product.
This function is not designed to deal with data flaged in some way as bad.
There are several extra outputs usefull for debuging and comparisons.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>is only one parameter</strong> (<em>There</em>) – </li>
<li><strong>dictionary functions effectively as a superset of</strong> (<em>This</em>) – </li>
<li><strong>relevant parameters.  The relevant parameters are given below</strong> (<em>the</em>) – </li>
<li><strong>time</strong> (<em>ndarray</em>) – An array of scalars of time stamps in seconds.</li>
<li><strong>Theta</strong> (<em>ndarray</em>) – An array of scalars representing the polar angle component
of the satelite in spherical coordinates.</li>
<li><strong>phi</strong> (<em>ndarray</em>) – An array of scalars representing the azimuth angle component
of the satelite in spherical coordinates.</li>
<li><strong>r</strong> (<em>ndarray</em>) – An array of scalars representing the radial angle component
of the satelite in spherical coordinates.</li>
<li><strong>B_base</strong> (<em>ndarray</em>) – An array of vectors of the magnetic field measurements.
The vectors are assumed to be in the NEC coordinate system.</li>
<li><strong>B_core</strong> (<em>ndarray</em><em>, </em><em>optional</em>) – An array of vectors of the magnetic field component
derived from a model of Earth’s core.</li>
<li><strong>B_lithosphere</strong> (<em>ndarray</em><em>, </em><em>optional</em>) – An array of vectors of the magnetic field component
derived from a model of the Earthø’s lithosphere (crust).</li>
<li><strong>B_magnetosphere_primary</strong> (<em>ndarray</em><em>, </em><em>optional</em>) – An array of vectors of the magnetic field component
derived from a model of the primary magnetosphere field.</li>
<li><strong>B_magnetosphere_secondary</strong> (<em>ndarray</em><em>, </em><em>optional</em>) – An array of vectors of the magnetic field component
derived from a model of the induced field from the magnetosphere.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>The return is a tuple consiting of the following</em></li>
<li><strong>time</strong> (<em>ndarray</em>) – An ndarray of  scalars describing the time each point
in the calculations corrisond to.
Note that it is off compared to the parameter time.</li>
<li><strong>position</strong> (<em>ndarray</em>) – An ndarray of spherical coordinates describing the postion
of each point in the time series where the calculations
are suppose to apply at. The coordinates are arranged as
theta, phi, r.
Note tht this is off compared to the parameter positions.</li>
<li><strong>irc</strong> (<em>ndarray</em>) – An ndarray of vectors of the radial currents (the radial components,
of currents) found when solving one of Maxwells equations
on the magnetic field.
Note that this is given in the VSC (spacecraft velocity) frame.</li>
<li><strong>fac</strong> (<em>ndarray</em>) – An ndarray of vectors of the field alligned currents.
Note that this is given in the VSC (spacecraft velocity) frame.</li>
<li><strong>V</strong> (<em>ndarray</em>) – An ndarray of vectors of the velocity in the NEC frame.</li>
<li><strong>V_VSC</strong> (<em>ndarray</em>) – An ndarray of vectors of the velocity in the VSC frame.</li>
<li><strong>pos_ltl</strong> (<em>ndarray</em>) – An ndarray of scalars of positions where local time is acounted for.
Each position reference the same position as positions output.
Note tht this is off compared to the parameter positions.</li>
<li><em>inclination</em> – An ndarray of scalars of the inclination of the aproximation
of the magnetic field, where the calculations
are supposed to be applied at.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.fac</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">positions</span> <span class="o">=</span> <span class="n">sw</span><span class="o">.</span><span class="n">pack_3d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.01</span> <span class="o">*</span> <span class="n">time</span><span class="p">)</span><span class="o">*</span><span class="mi">90</span><span class="p">,(</span><span class="mf">0.01</span> <span class="o">*</span> <span class="n">time</span> <span class="o">%</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">/</span><span class="n">sw</span><span class="o">.</span><span class="n">TO_RADIANS</span> <span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B_res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">),</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span> <span class="n">sw</span><span class="o">.</span><span class="n">as_3d</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B_core</span> <span class="o">=</span> <span class="n">sw</span><span class="o">.</span><span class="n">as_3d</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">2</span><span class="p">])</span><span class="o">*</span><span class="n">sw</span><span class="o">.</span><span class="n">pack_3d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]),</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">)),</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">single_sat_fac_full</span><span class="p">({</span><span class="s1">&#39;time&#39;</span><span class="p">:</span><span class="n">time</span><span class="p">,</span><span class="s1">&#39;Theta&#39;</span><span class="p">:</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;phi&#39;</span><span class="p">:</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;r&#39;</span><span class="p">:</span><span class="n">positions</span><span class="p">[:,</span><span class="mi">2</span><span class="p">],</span><span class="s1">&#39;B_base&#39;</span><span class="p">:</span><span class="n">B_res</span><span class="o">+</span><span class="n">B_core</span><span class="p">,</span><span class="s1">&#39;B_core&#39;</span><span class="p">:</span><span class="n">B_core</span><span class="p">})</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">(array([...]), array([[...]]), array([...]), array([...]), array([[...]]), array([[...]]), array([[...]]), array([...]))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.fac.split_models">
<code class="descclassname">swarmpyfac.fac.</code><code class="descname">split_models</code><span class="sig-paren">(</span><em>baseline</em>, <em>*models</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/fac.html#split_models"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.fac.split_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Seperate the effect of models from the baseline.</p>
<p>Seperate the effect of model and risidual on the baseline,
base on precalculated effects of each model.
It is assumed that the models combine linearly with each
other and a residual (meaning modelA + modelB + residual = baseline,
but not modelA * modelB + residual = baseline or other such variations).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>baseline</strong> (<em>ndarray</em>) – An array of the base measurements.</li>
<li><strong>*models</strong> (<em>ndarray</em>) – Arrays of the effects of each model to be removed.
all models must have the same length as baseline.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A tuple, with the first component being an ndarray of the residual
and the second component being an ndarray of the combined model.
The result statisfies that the sum of the components
is equal to the baseline.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tuple of ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.fac</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modelA</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modelB</span> <span class="o">=</span> <span class="n">sw</span><span class="o">.</span><span class="n">as_3d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mf">0.1</span> <span class="o">+</span> <span class="n">modelA</span> <span class="o">+</span> <span class="n">modelB</span>
<span class="gp">... </span>        <span class="o">+</span> <span class="n">sw</span><span class="o">.</span><span class="n">pack_3d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_models</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">modelA</span><span class="p">,</span><span class="n">modelB</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">(array([[...,...,...],</span>
<span class="go">       [...,...,...],</span>
<span class="go">       [...,...,...],</span>
<span class="go">       [...,...,...],</span>
<span class="go">       [...,...,...]]), array([[  7.,   8.,  11.],</span>
<span class="go">       [ 15.,  22.,  31.],</span>
<span class="go">       [ 41.,  54.,  69.],</span>
<span class="go">       [ 85., 104., 125.],</span>
<span class="go">       [147., 172., 199.]]))</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-swarmpyfac.safety">
<span id="swarmpyfac-safety-module"></span><h2>swarmpyfac.safety module<a class="headerlink" href="#module-swarmpyfac.safety" title="Permalink to this headline">¶</a></h2>
<p>The safe_user module provides basic security for login information.</p>
<p>This module is used to save login credentials safely in an encrypted file
and still have it employed by through an API,
with possibility for user prompting for password to open said file.</p>
<p>It uses AES encryption with random initial vector saved in file,
with the message containing padding if it is short,
typically less than 4096 characters.
No guarentee is granted on the strength of the randomization.
There is given no certification on the security level of data
stored by the use of this module, so it is mainly recommended
to be used for data requiring only lower level security,
such as access to unimportant/semi-public websites.
If you need high secrutity storage, such as for credit card
information or state or trade secrets, it is hightly suggested
you consult a security proffesional on what would be adequat.</p>
<div class="section" id="guide">
<h3>Guide<a class="headerlink" href="#guide" title="Permalink to this headline">¶</a></h3>
<p>This module is a functional library, with an onion-like abstraction structure.
There are in general functions to add and remove single layers,
or add or remove all they way up to a specific layer.
You can use this to provide a solution on the level you need.</p>
<p>Each layer has their own section, so you can go look at that,
for information on that specific layer.
The layers are: XML, Padding, Encryption, Boxing, Locking.
There is also a section called Other, which is on parts of the module,
which falls outside the specific layers.</p>
</div>
<div class="section" id="xml">
<h3>XML<a class="headerlink" href="#xml" title="Permalink to this headline">¶</a></h3>
<p>This is the base structure used for communicating data.
This can be considered the core of the onion,
and most of functions can work with other data structures.
The exceptions are fetch_login, and those with XML in their name.</p>
<dl class="docutils">
<dt>Functions on this layer:</dt>
<dd><dl class="first last docutils">
<dt>build_default_XML</dt>
<dd>Build a minimal XML structure.</dd>
<dt>find_login_in_XML</dt>
<dd>Extract login information from the XML structure.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="padding">
<h3>Padding<a class="headerlink" href="#padding" title="Permalink to this headline">¶</a></h3>
<p>When we add the padding layer we extend a text,
such that it is a valid input for the encryption layer.
We also use it to ensure that messages are not short,
and provide extra entropy.
The padding layer contains the meta-data needed to undo the padding.
A message which has this layer applied to it is called
a padded message/text or padded for short.</p>
<p>The format used is as follows:
‘Hxxx*paddedMessage              ‘
Where H is a hexadeximal number describing how many extra spaces are placed
at the end to reach a length divisible by 16.
The xxx describes how many characters to skip
between each character in the message, it is terminated by the ‘*’</p>
<dl class="docutils">
<dt>Functions on this layer:</dt>
<dd><dl class="first last docutils">
<dt>format_padding</dt>
<dd>A function that takes a text and formats it into a valid padding.
You can use this as a minimal padding scheme.</dd>
<dt>remove_padding</dt>
<dd>Recover the plain text from the padded text.</dd>
<dt>add_padding</dt>
<dd>Use sdefault way to add padding.</dd>
<dt>add_padding1, add_padding2, add_padding3</dt>
<dd>Different implementations of padding.</dd>
<dt>set_padding_defaults</dt>
<dd>Used to change add padding defaults, so one can use a different
algorithm or base even when using functions that hide these details.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="encryption">
<h3>Encryption<a class="headerlink" href="#encryption" title="Permalink to this headline">¶</a></h3>
<p>When we add the encryption layer we apply AES encryption on a padded text.
This requires a block size of 128 bits, which means the padded text
must effectively have a length divisable by 16 (assuming 8 bit charcters).
The key used is constructed from cryptographic hashing,
so it is possible to use arbitary length passwords.
AES encryption requires an initialization vector (IV),
which is assumed to be of 1 block length (128 bits or 16 characters).
Failure to satisfy these requirements may result in undocumented errors,
as the layers around this is build to ensure that they are satisfied.
A message which has this layer applied to it is called
eitger an encrypted message/text or cipher text or cipher for short.</p>
<dl class="docutils">
<dt>Functions on this layer:</dt>
<dd><dl class="first last docutils">
<dt>encrypt</dt>
<dd>applies the encryption layer to a padded text.</dd>
<dt>decrypt</dt>
<dd>removes the rencryption layer and recover a padded text.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="boxing">
<h3>Boxing<a class="headerlink" href="#boxing" title="Permalink to this headline">¶</a></h3>
<p>The boxing layer is concerned with creating a package
of an encrypted message and its initialization vector.
The boxing layer only comes in the form where it applies
multiple layers at once, and it is intended as a simple
to use outer interface, where you do not need to concern
yourself with more than what message you have,
and what password to encrypt it with.
This means that both the padding layer and encryption
layer are also applied together with the boxing layer.
A message which has this layer applied to it is called a boxed message/text.</p>
<dl class="docutils">
<dt>Functions in this layer:</dt>
<dd><dl class="first last docutils">
<dt>box_content</dt>
<dd>Take a message (before padding layer),
and apply layers with the boxing layer as the outermost layer.</dd>
<dt>unbox_content</dt>
<dd>Take a boxed message and remove,
where the innermost layer removed is the padding layer.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="locking">
<h3>Locking<a class="headerlink" href="#locking" title="Permalink to this headline">¶</a></h3>
<p>The locking layer is the use of file abstraction,
where the content of those files may have been boxed on unboxed.
Just like the boxing layer it is intended as a finishing layer,
where instead of being applied to strings like the boxing layer,
it is applied to files instead.
A file which has this layer applied to it is called
a locked file or an encrypted file.</p>
<dl class="docutils">
<dt>Functions in this layer:</dt>
<dd><dl class="first last docutils">
<dt>lock_file</dt>
<dd>Take a file with some content, and overwrite it with
a version of it itself where its content have been boxed.</dd>
<dt>unlock_file</dt>
<dd>Take a file with some boxed content, and overwrite it with
a version of it itself where its content have been unboxed.</dd>
<dt>fetch_login</dt>
<dd>Look into a file with boxed xml based content,
unbox the content and return information from the file.
All without changing the file.</dd>
<dt>build_file</dt>
<dd>Construct xml content similar to build_default_XML,
and write a locked file with that content.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="other">
<h3>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>_chain</dt>
<dd>A function used to fcreater flatter generators.</dd>
<dt>prompt_login_data</dt>
<dd>A function used to prompt username and password from a user at runtime.</dd>
<dt>prompt_password</dt>
<dd>A function used to prompt password from a user at runtime.</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">box_content</span><span class="p">(</span><span class="s1">&#39;One Ring to rule them all, &#39;</span>
<span class="gp">... </span>                <span class="s1">&#39;One ring to find them; &#39;</span>
<span class="gp">... </span>                <span class="s1">&#39;One ring to bring them all &#39;</span>
<span class="gp">... </span>                <span class="s1">&#39;and in the darkness bind them.&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;Tolkien&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">3456</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">unbox_content</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="s1">&#39;Tolkien&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[:</span><span class="mi">26</span><span class="p">]</span>
<span class="go">&#39;One Ring to rule them all,&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">build_file</span><span class="p">(</span><span class="s1">&#39;test.xml&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">password</span><span class="o">=</span><span class="s1">&#39;bukke bruse&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">default_login</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;user1&#39;</span><span class="p">,</span><span class="s1">&#39;failed&#39;</span><span class="p">))</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fetch_login</span><span class="p">(</span><span class="s1">&#39;test.xml&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;bukke bruse&#39;</span><span class="p">)</span>  <span class="c1"># doctest: +SKIP</span>
<span class="go">{&#39;username&#39;: &#39;user1&#39;, &#39;password&#39;: &#39;failed&#39;)</span>
</pre></div>
</div>
<dl class="function">
<dt id="swarmpyfac.safety.add_padding">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">add_padding</code><span class="sig-paren">(</span><em>message</em>, <em>base=4096</em>, <em>algorithm=&lt;function add_padding2&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#add_padding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.add_padding" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.add_padding1">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">add_padding1</code><span class="sig-paren">(</span><em>text</em>, <em>base=4096</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#add_padding1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.add_padding1" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds padding to the text so it fits well into encryption blocks.</p>
<p>This function adds padding to a text, and include some metadata,
which can be used to identify which parts are the padding,
and thereby remove it.
This function may add up to two types of padding,
in addition to metadata that may also be added.
The first padding type is a randomized padding that spreads
out the input text to ensure that the text is not too short,
and to provide resistance against length based attacks.
The second padding type is blank padding used make the text
compatible with block ciphers.
This function is hardcoded to align to blocks of length 16.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This function has been depreciated, you should use add_padding2
instead, since this one suffers performance problems.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>text</strong> (<em>str</em>) – The text that is to be padded.</li>
<li><strong>base</strong> (<em>int</em><em>, </em><em>optional</em>) – An integer describing the boundary between short and long texts,
where only short texts may be subject to the first type of padding.
Default is 4096, must be at least 1.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A string based on text, which has length % 16 == 0.
It also contains the information needed to remove the padding.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_padding1</span><span class="p">(</span><span class="s1">&#39;secret message&#39;</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;b255*...s...e...c...r...e...t... ...m...e...s...s...a...g...e           &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_padding1</span><span class="p">(</span><span class="s1">&#39;secret message&#39;</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;f0*secret message               &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_padding1</span><span class="p">(</span><span class="s1">&#39;secret message&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;f0*secret message               &#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.add_padding2">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">add_padding2</code><span class="sig-paren">(</span><em>text</em>, <em>base=4096</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#add_padding2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.add_padding2" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds padding to the text so it fits well into encryption blocks.</p>
<p>This function adds padding to a text, and include some metadata,
which can be used to identify which parts are the padding,
and thereby remove it.
This function may add up to two types of padding,
in addition to metadata that may also be added.
The first padding type is a randomized padding that spreads
out the input text to ensure that the text is not too short,
and to provide resistance against length based attacks.
The second padding type is blank padding used make the text
compatible with block ciphers.
This function is hardcoded to align to blocks of length 16.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>text</strong> (<em>str</em>) – The text that is to be padded.</li>
<li><strong>base</strong> (<em>int</em><em>, </em><em>optional</em>) – An integer describing the boundary between short and long texts,
where only short texts may be subject to the first type of padding.
Default is 4096, must be at least 1.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A string based on text, which has length % 16 == 0.
It also contains the information needed to remove the padding.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_padding2</span><span class="p">(</span><span class="s1">&#39;secret message&#39;</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;b255*...s...e...c...r...e...t... ...m...e...s...s...a...g...e           &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_padding2</span><span class="p">(</span><span class="s1">&#39;secret message&#39;</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;f0*secret message               &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_padding2</span><span class="p">(</span><span class="s1">&#39;secret message&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;f0*secret message               &#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.add_padding3">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">add_padding3</code><span class="sig-paren">(</span><em>message</em>, <em>base=4096</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#add_padding3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.add_padding3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.box_content">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">box_content</code><span class="sig-paren">(</span><em>text</em>, <em>password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#box_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.box_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Package text into encrypted cypther-text with meta-data.</p>
<p>This function ‘box’ the text as an AES encrympted dump.
It takes care of all the needed substeps, including
padding, choosing initial vector, encryption, and storing meta-data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>text</strong> (<em>str</em>) – A string of plain text.</li>
<li><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – The password used to construct the key for the encryption.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A binary string containing the encrypted text, initial vector,
and other meta-data which is hidden under the encryption.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">box_content</span><span class="p">(</span><span class="s1">&#39;There is no cake&#39;</span><span class="p">,</span> <span class="s1">&#39;beware of goats&#39;</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">b&#39;...&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.build_default_XML">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">build_default_XML</code><span class="sig-paren">(</span><em>default_login=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#build_default_XML"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.build_default_XML" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a xml based string with default login settings.</p>
<p>This function creates a string of XML, which contains
default login settings, which can then be read
by find_login_in_XML or saved to a file.
It is recommened to have this information encrypted,
such as by using box_content on it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default_login</strong> (<em>tuple of two strings</em><em>, </em><em>optional</em>) – A tuple of form (username, password), which is used
as the default login informaion recorded in the xml string.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A string representing an xml file, which contains
default login settings and would work for <cite>find_login_in_XML</cite>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">build_default_XML</span><span class="p">((</span><span class="s1">&#39;nimda&#39;</span><span class="p">,</span> <span class="s1">&#39;tapas&#39;</span><span class="p">))</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;...&lt;xml&gt;...&lt;default&gt;...&lt;username&gt;nimda&lt;/username&gt;...&lt;password&gt;tapas&lt;/password&gt;...&lt;/default&gt;...&lt;/xml&gt;...&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.build_file">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">build_file</code><span class="sig-paren">(</span><em>filename</em>, <em>password=None</em>, <em>default_login=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#build_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.build_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a locked xml file which include a default loging.</p>
<p>This function is used to construct a defaulted boxed xml file.
This can be used with fetch_loging, or unboxed with unlock file.
The content of the file, after unboxing can be used with
find_login_in_XML.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) – A string of the path to the file, including its name.</li>
<li><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – The password used to construct the key for the encryption.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</li>
<li><strong>default_login</strong> (<em>tuple of two strings</em><em>, </em><em>optional</em>) – A tuple of form (username, password), which is used
as the default login informaion recorded in the xml file.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">There is no return statement, this results in a None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">build_file</span><span class="p">(</span><span class="s1">&#39;example.xml&#39;</span><span class="p">,</span> <span class="s1">&#39;welcome&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;blank&#39;</span><span class="p">,</span> <span class="s1">&#39;stare&#39;</span><span class="p">))</span> <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.decrypt">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">decrypt</code><span class="sig-paren">(</span><em>cipher_text</em>, <em>password=None</em>, <em>IV='zzzzzzzzzzzzzzzz'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#decrypt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.decrypt" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrypt an AES encrypted message.</p>
<p>Decrypts a text with the AES encryption, with given intial vector,
and a password either passed or prompted to the user at runtime.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cipher_text</strong> (<em>binary str</em>) – A string of binary type, which contains an AES encrypted message.</li>
<li><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – The password used to construct the key for the decryption.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</li>
<li><strong>IV</strong> (<em>str</em><em>, </em><em>optional</em>) – A string representing the initial vector of the AES encryption.
Must be exactly 16 bytes long (equivalent to 16 normal characters).
Default is 16 repeat ‘z’ == ‘z’ letters.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A string representing the decrypted text.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span> <span class="o">=</span> <span class="n">add_padding</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cipher_text</span> <span class="o">=</span> <span class="n">encrypt</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;ESA&#39;</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decrypt</span><span class="p">(</span><span class="n">cipher_text</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;ESA&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">payload</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.encrypt">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">encrypt</code><span class="sig-paren">(</span><em>padded</em>, <em>password=None</em>, <em>IV='zzzzzzzzzzzzzzzz'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#encrypt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.encrypt" title="Permalink to this definition">¶</a></dt>
<dd><p>Encrypt a text with AES encryption.</p>
<p>Encrypts a text with the AES encryption, with given intial vector,
and a password either passed or prompted to the user at runtime.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>padded</strong> (<em>str</em>) – A string of (padded) text to be encrypted.
It must satisfy len(padded)%16 == 0.</li>
<li><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – The password used to construct the key for the encryption.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</li>
<li><strong>IV</strong> (<em>str</em><em>, </em><em>optional</em>) – A string representing the initial vector of the AES encryption.
Must be exactly 16 bytes long (equivalent to 16 normal characters).
Default is 16 repeat ‘z’ == ‘z’ letters.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A binary string containing the encrypted text.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">binary string</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span> <span class="o">=</span> <span class="n">add_padding</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encrypt</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;ESA&#39;</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">b&#39;...&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.fetch_login">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">fetch_login</code><span class="sig-paren">(</span><em>filename</em>, <em>target='viresLogin'</em>, <em>password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#fetch_login"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.fetch_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch information from a locked file.</p>
<p>This function peaks into an encrypted file and retrievs
login like information from it, without leaving the file unencrypted.
Specifically it uses files that have been locked,
meaning it has boxed content.
It is assumed that the content after unboxing will form a valid
xml structure, that find_login_in_XML can be applied to.</p>
<p>This function is intended to be used as a top level abstraction,
of aquiring login information in other modules.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) – A string of the path to the file, including its name.</li>
<li><strong>target</strong> (<em>str</em><em>, </em><em>optional</em>) – A string representing the xml tag where the data
we want is stored under.
If this tag does not exists we will get the data stored
uder the tag ‘default’ instead.
Default is ‘viresLogin’.</li>
<li><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – The password used to construct the key for the decryption.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">There is no return statement, this results in a None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fetch_login</span><span class="p">(</span><span class="s1">&#39;example.xml&#39;</span><span class="p">,</span> <span class="s1">&#39;welcome&#39;</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<span class="go">{&#39;username&#39;: &#39;blank&#39;, &#39;password&#39;: &#39;stare&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.find_login_in_XML">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">find_login_in_XML</code><span class="sig-paren">(</span><em>text</em>, <em>target='viresLogin'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#find_login_in_XML"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.find_login_in_XML" title="Permalink to this definition">¶</a></dt>
<dd><p>Search an XML string for login-like information.</p>
<p>Search a string of xml structure of a specific form.
It is assumed that the xml structure contains the following structure:
Outermost a root of arbitary tag.
Inside the root one or more taged pieces, one being “default”
Inside these tags a set of tags with text content.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>text</strong> (<em>str</em>) – A string containing a xml structure as described above.</li>
<li><strong>target</strong> (<em>str</em><em>, </em><em>optional</em>) – A string describing the tag to search for.
Searches for ‘default’ if not found.
Defaults to ‘viresLogin’.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A dictionary containing the pairs of tags and text,
for tags found as children to the search result.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_login_in_XML</span><span class="p">(</span><span class="s1">&#39;&lt;xml&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;default&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;admin&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;123&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/default&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;&lt;/xml&gt;&#39;</span><span class="p">)</span>
<span class="go">{&#39;username&#39;: &#39;admin&#39;, &#39;password&#39;: &#39;123&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_login_in_XML</span><span class="p">(</span><span class="s1">&#39;&lt;xml&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;viresLogin&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;admin&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;123&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/viresLogin&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;&lt;/xml&gt;&#39;</span><span class="p">)</span>
<span class="go">{&#39;username&#39;: &#39;admin&#39;, &#39;password&#39;: &#39;123&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_login_in_XML</span><span class="p">(</span><span class="s1">&#39;&lt;xml&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;default&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;admin&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;123&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/default&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;viresLogin&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;John&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;Doe&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/viresLogin&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;&lt;/xml&gt;&#39;</span><span class="p">)</span>
<span class="go">{&#39;username&#39;: &#39;John&#39;, &#39;password&#39;: &#39;Doe&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_login_in_XML</span><span class="p">(</span><span class="s1">&#39;&lt;xml&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;default&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;admin&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;123&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/default&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;viresLogin&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;John&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;Doe&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/viresLogin&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;trouble&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;snowflake&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;unique&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/trouble&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;&lt;/xml&gt;&#39;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="s1">&#39;trouble&#39;</span><span class="p">)</span>
<span class="go">{&#39;username&#39;: &#39;snowflake&#39;, &#39;password&#39;: &#39;unique&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_login_in_XML</span><span class="p">(</span><span class="s1">&#39;&lt;xml&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;default&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;admin&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;123&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/default&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;viresLogin&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;John&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;Doe&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/viresLogin&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;trouble&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;username&gt;snowflake&lt;/username&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;    &lt;password&gt;unique&lt;/password&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;  &lt;/trouble&gt;&#39;</span>
<span class="gp">... </span>                  <span class="s1">&#39;&lt;/xml&gt;&#39;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="s1">&#39;globus&#39;</span><span class="p">)</span>
<span class="go">{&#39;username&#39;: &#39;admin&#39;, &#39;password&#39;: &#39;123&#39;}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Using build_file will generate a valid xml structure,
containing only the default tag and subtags.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.format_padding">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">format_padding</code><span class="sig-paren">(</span><em>text</em>, <em>stride=1</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#format_padding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.format_padding" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats a message in relation with padding and its metadata.</p>
<p>Format a message such that it includes the meta
needed to remove the padding.
It also may add whitespace at the end to ensure it can be AES encrypted.
This function is sufficient for use of the encrypt function.</p>
<p>The format looks as follows:
‘Hxxx*message    ‘
H is a single hexadeximal digit, counting how many spaces
have been added at the end.
xxx is some digits representing stride in decimal character notation.
There amount of digits in xxx is not fixed.
The * specify when the xxx digits end and when the text starts.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>text</strong> (<em>str</em>) – A string containing the message.</li>
<li><strong>stride</strong> (<em>int</em><em>, </em><em>optional</em>) – An integer describing the stride used for where in the text
that the actual message can be located.
Defaults to 1.</li>
<li><strong>*args</strong> – Extra positional arguments, which are discared.
This is here so it can be called with extra positional arguments.</li>
<li><strong>**kwargs</strong> – Extra keyword arguments, which are discared.
This is here so it can be called with extra keyword arguments.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A string with meta-data. It satisfies len(s) % 16 == 0.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_padding</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">&#39;d0*             &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_padding</span><span class="p">(</span><span class="s1">&#39;short message&#39;</span><span class="p">)</span>
<span class="go">&#39;00*short message&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_padding</span><span class="p">(</span><span class="s1">&#39;secret message&#39;</span><span class="p">)</span>
<span class="go">&#39;f0*secret message               &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_padding</span><span class="p">(</span><span class="s1">&#39;DsReLcnrieBtJ 0mxeRsmsuaQgOe&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;11*DsReLcnrieBtJ 0mxeRsmsuaQgOe &#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.lock_file">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">lock_file</code><span class="sig-paren">(</span><em>filename</em>, <em>password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#lock_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.lock_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace a file with a boxed version of its content.</p>
<p>This function reads the file at the path <cite>filename</cite>,
box the content and write the result back over the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) – A string of the path to the file, including its name.</li>
<li><strong>password</strong> (<em>str</em><em>, </em><em>option</em>) – The password used to construct the key for the encryption.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">There is no return statement, this results in a None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lock_file</span><span class="p">(</span><span class="s1">&#39;some.xml&#39;</span><span class="p">,</span><span class="s1">&#39;gatekeeper&#39;</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.prompt_login_data">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">prompt_login_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#prompt_login_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.prompt_login_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompt a username and a password from the user.</p>
<p>This function prompts the user two times,
first for a username, secondly for a password.
The password prompt hides the input from view,
such that one can enter it
while others might be looking at the screen.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><em>A tuple containing the following</em></li>
<li><strong>user</strong> (<em>str</em>) – A string corrinsponding to the entered username.</li>
<li><strong>pw</strong> (<em>str</em>) – A string corrinsponding to the entered password.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The input from the user is not sanity-checked,
so it can form a popential vurnerability in deployed software.</p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_login_data</span><span class="p">()</span> <span class="c1"># doctest: +ELLIPSIS, +SKIP</span>
<span class="go">Enter login username:...</span>
<span class="go">Enter login password:...</span>
<span class="go">(&#39;...&#39;, &#39;...&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.prompt_password">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">prompt_password</code><span class="sig-paren">(</span><em>default='Def8lttPa88word'</em>, <em>is_bad=&lt;function &lt;lambda&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#prompt_password"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.prompt_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts the user for a password.</p>
<p>This function prompts the user once for a password.
The password prompt hides the input from view,
such that one can enter it
while others might be looking at the screen.</p>
<p>This function also allows some sanity checking of the
input password, and will replace the password with
a default if the users input fails the sanity check.</p>
<p>Note that this function is intended to be for passwords,
that represent the encryption keys to a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>default</strong> (<em>str</em>) – A default password to use if the password given
by the user does not pass the sanitycheck.</li>
<li><strong>is_bad</strong> (<em>str -&gt; boolean</em>) – A function that takes a string (specifically a
password candidate) and sanity chekcs it.
Note that this function must return True
if the candidate is to be discarded, and False
if the candidate can be accepted.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The password given by the user or the default password,
if the password given by the user does not pass the sanity check.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_password</span><span class="p">()</span> <span class="c1"># doctest: +ELLIPSIS, +SKIP</span>
<span class="go">Enter password for file: ...</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.remove_padding">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">remove_padding</code><span class="sig-paren">(</span><em>padded</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#remove_padding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.remove_padding" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the padding from a string.</p>
<p>This function removes the padding generated by an addpadding
or the simpler format_padding, including the metadata.
The text is assumed to satisfy the format given in format_padding.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>padded</strong> (<em>str</em>) – A piece of text that have been padded by an add_padding.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A string of the text without the padding.
This should be equivalent to the text before padding was added.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">padded</span> <span class="o">=</span> <span class="n">add_padding</span><span class="p">(</span><span class="s1">&#39;secret message&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remove_padding</span><span class="p">(</span><span class="n">padded</span><span class="p">)</span>
<span class="go">&#39;secret message&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remove_padding</span><span class="p">(</span><span class="n">add_padding</span><span class="p">(</span><span class="s1">&#39;other message&#39;</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
<span class="go">&#39;other message&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remove_padding</span><span class="p">(</span><span class="n">add_padding</span><span class="p">(</span><span class="s1">&#39;another message&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="go">&#39;another message&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.set_default_padding">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">set_default_padding</code><span class="sig-paren">(</span><em>base=4096</em>, <em>algorithm=&lt;function add_padding2&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#set_default_padding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.set_default_padding" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.unbox_content">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">unbox_content</code><span class="sig-paren">(</span><em>boxed</em>, <em>password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#unbox_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.unbox_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrive text from cyper-text from box_content.</p>
<p>This function takes some text that have been ‘boxed’
as an AES encrypted dump, and revert back into the original test.
It takes care of all the needed substeps, including
removing padding, extracting meta-data and decryption.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>boxed</strong> (<em>str</em>) – A string of binary text, representing a result from box_content.</li>
<li><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – The password used to construct the key for the decryption.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A string representing the decrypted and unpadded text.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cipher</span> <span class="o">=</span> <span class="n">box_content</span><span class="p">(</span><span class="s1">&#39;send the rover&#39;</span><span class="p">,</span> <span class="s1">&#39;once in a blue moon&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unbox_content</span><span class="p">(</span><span class="n">cipher</span><span class="p">,</span> <span class="s1">&#39;once in a blue moon&#39;</span><span class="p">)</span>
<span class="go">&#39;send the rover&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.safety.unlock_file">
<code class="descclassname">swarmpyfac.safety.</code><code class="descname">unlock_file</code><span class="sig-paren">(</span><em>filename</em>, <em>password=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/safety.html#unlock_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.safety.unlock_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace a file with an unboxed version of its content.</p>
<p>This function reads the file at the path <cite>filename</cite>,
unbox the content and write the result back over the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>str</em>) – A string of the path to the file, including its name.</li>
<li><strong>password</strong> (<em>str</em><em>, </em><em>option</em>) – The password used to construct the key for the decryption.
If it is not specified as a parameter,
then the user will be prompted to choose one during runtime.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">There is no return statement, this results in a None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.safety</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unlock_file</span><span class="p">(</span><span class="s1">&#39;some.xml&#39;</span><span class="p">,</span><span class="s1">&#39;gatekeeper&#39;</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-swarmpyfac.utils">
<span id="swarmpyfac-utils-module"></span><h2>swarmpyfac.utils module<a class="headerlink" href="#module-swarmpyfac.utils" title="Permalink to this headline">¶</a></h2>
<p>The swarm_util module provides a host of utilities function.</p>
<p>This module stores a vararity of different functions and constants,
which is deemed general usefull when working on swarm data,
specifically when such data is loaded from
the viresclient python client.</p>
<p>There is a mix of general constants, such as the permuability of vacum,
and different types of functions.
The functions can generally be categorised into three types:
Higher order functions, functions for working on arrays
of scalars or vectors, and functions to work with viresclient.
These categories have their own sections, with a short descriptions on each.</p>
<div class="section" id="higher-order-functions">
<h3>Higher Order Functions<a class="headerlink" href="#higher-order-functions" title="Permalink to this headline">¶</a></h3>
<p>Higher order functions are functions that operates on other functions.
This section also contains utilities for higher other higher order functions.</p>
<dl class="docutils">
<dt>call</dt>
<dd>A function to call other functions.
Its main use is propergating options down the call stack.</dd>
<dt>maybe_pops</dt>
<dd>A utility for call, works kind of like an intersection,
but pops (remove and return) key-value pairs from a dictionary.</dd>
<dt>maybe_keys</dt>
<dd>A utility for call, works kind of like an intersection,
but returns key-value pairs from a dictionary.</dd>
</dl>
</div>
<div class="section" id="array-utilities">
<h3>Array Utilities<a class="headerlink" href="#array-utilities" title="Permalink to this headline">¶</a></h3>
<p>These functions are used to work on numpy arrays of scalars or vectors.
They are mostly geared toward dealign with time-like series.</p>
<dl class="docutils">
<dt>pack_3d</dt>
<dd>Take 3 equaly long arrays of scalars and make an array of 3d vectors.</dd>
<dt>as_3d</dt>
<dd>Like pack_3d, but uses dublicates of the same array of scalars.
Usefull for aggregating scalar-vector operations over an array.</dd>
<dt>map_3d</dt>
<dd>A map function over arrays of 3d vectors,
where the function maped takes a 3d vector to a 3d vector.</dd>
<dt>NEC_to_VSC</dt>
<dd>Build a transformation from the NEC frame to the VSC frame.
The return is a function, which will transfrom
its input from the NEC frame to the VSC frame.</dd>
<dt>delta</dt>
<dd>Calculate the changes of a time-like series.</dd>
<dt>means</dt>
<dd>Calculate the intermediate value (by linear interpolation)
for a time-like series.</dd>
<dt>spherical_delta</dt>
<dd>Calculate the changes in spherical coordinates as NEC frame vectors.</dd>
<dt>curl</dt>
<dd>Calculate a single component of curl for an array of vectors.</dd>
<dt>inclination</dt>
<dd>Calculate the inclination for an awway of vectors.</dd>
</dl>
</div>
<div class="section" id="viresclient">
<h3>Viresclient<a class="headerlink" href="#viresclient" title="Permalink to this headline">¶</a></h3>
<p>These are the functions related to fetching and loading data
from the viresclient python client.</p>
<dl class="docutils">
<dt>request_data</dt>
<dd>Builds and send a request for a CDF file to vires.
Most usefull for defaulting all the relevant parameters.</dd>
<dt>read_cdf</dt>
<dd>A function to read a cdf file based on a dictionary pairing
of attributes you want to read from the cdf file,
and what you want to refere to them as afterwards.</dd>
</dl>
<dl class="function">
<dt id="swarmpyfac.utils.NEC_to_VSC">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">NEC_to_VSC</code><span class="sig-paren">(</span><em>velocities</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#NEC_to_VSC"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.NEC_to_VSC" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a function to transform from the NEC frame to the VSC frame.</p>
<p>This function generates another function,
which is a transform of vectors from the NEC frame to the VSC frame.
This specific transformation may be different for each data point.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>velocities</strong> (<em>ndarray</em>) – The velocities describe thw forward direction in the VSC frame,
and they can be different for each data point.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A function that takes a list of vectors
of the same length as velocities and
transform them from the NEC frame to the VSC frame.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">function</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trans</span> <span class="o">=</span> <span class="n">NEC_to_VSC</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trans</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">array([[ 0.7...,  0.7...,  2. ...],</span>
<span class="go">       [ 3.5...,  3.5...,  5. ...],</span>
<span class="go">       [ 6.5...,  6.5...,  8. ...],</span>
<span class="go">       [ 9.5...,  9.5..., 11. ...],</span>
<span class="go">       [12.5..., 12.5..., 14. ...]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trans</span><span class="p">((</span><span class="n">v</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mf">2.5</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span> <span class="o">+</span> <span class="mi">3</span><span class="p">))</span> <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">array([[ 49.8...,   9.5...,  57.5...],</span>
<span class="go">       [ 46.0...,  46.4...,  68. ...],</span>
<span class="go">       [ 34.8...,  42.4...,  60.5...],</span>
<span class="go">       [  7.0...,  19.1...,  35. ...],</span>
<span class="go">       [-38.4..., -22.4...,  -8.5...]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.as_3d">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">as_3d</code><span class="sig-paren">(</span><em>scalars</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#as_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.as_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>As pack_3d, but with the same scalars in on all components.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scalars</strong> (<em>array-like</em>) – An array-like of scalars.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An array of 3 dimensional vectors with the same length as xs.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">as_3d</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="o">*</span> <span class="n">vec</span>
<span class="go">array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 3.,  4.,  5.],</span>
<span class="go">       [12., 14., 16.],</span>
<span class="go">       [27., 30., 33.],</span>
<span class="go">       [48., 52., 56.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.call">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">call</code><span class="sig-paren">(</span><em>function</em>, <em>dict_</em>, <em>*args</em>, <em>use_pop=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.call" title="Permalink to this definition">¶</a></dt>
<dd><p>Call a function with arguments mixed from different sources.</p>
<p>Call a function, by mixing the arguments for the function.
Specifically it extract extra parameters from <cite>dict_</cite>
to use as default keyword arguments in case they have not
been specified otherwise.
If the function called accepts <cite>**kwargs</cite>, then all <cite>dict_</cite>
arguments not otherwise relevant will also be added,
so they can be passed further down possible call chains.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>function</strong> (<em>a -&gt; b</em>) – A function to be called with the composed arguments.
Note that the argument names for this function is used
to determine which keyword arguments to extract from <cite>dict_</cite></li>
<li><strong>dict_</strong> (<em>dict</em>) – A directory of keyword argument pairs that might be
keyword arguments for the function.
There is no requirement for any overlap with argument names
of function, but only the overlap is used here.</li>
<li><strong>*args</strong> – The positional arguments to be passed to function.</li>
<li><strong>use_pop</strong> (<em>boolean</em><em>, </em><em>optional</em>) – A flag for whether the arguments in <cite>dict_</cite> used in the call
should be removed from dict.
Defaults to False (None, which evaluates to False).</li>
<li><strong>**kwargs</strong> – The keyword arguments to be passed to the function.
These keyword arguments takes priority over those in <cite>_dict</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The result of the function call.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><p>?</p>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Base use:
&gt;&gt;&gt; from pyfac.utils import *  # doctest: +SKIP
&gt;&gt;&gt; options = {‘password’:’MyPassword’,’IV’:16*’’,’target_index’:1}
&gt;&gt;&gt; call(safe_user.box_content,options,’bla’) # doctest: +ELLIPSIS
b’…’</p>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.curl">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">curl</code><span class="sig-paren">(</span><em>delta_x</em>, <em>delta_field</em>, <em>target_index=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#curl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.curl" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a single component of curl for an array of vectors.</p>
<p>This function is used to calculate a finite difference apporximation
of curl. Its starting point is similar to a finite difference
approximation of a partial derivative, where you use both the
recoded change in the function and what you differentiate with respect to.
In practice this calculate an array of in independent curl operations,
as given by a single step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>delta_x</strong> (<em>ndarray</em>) – An array of the finite difference in the considered step.</li>
<li><strong>delta_field</strong> (<em>ndarray</em>) – An array of the finite difference of the field under
the relevant considered step.</li>
<li><strong>target_index</strong> (<em>int</em><em>, </em><em>optional</em>) – The index of the dimension of the curl that should be given as output.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An array of the curl-like quantity,
but only target_index dimension of it.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vecs</span> <span class="o">=</span> <span class="n">delta</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curl</span><span class="p">(</span><span class="n">vecs</span><span class="p">,</span><span class="n">vecs</span><span class="p">)</span>
<span class="go">array([0., 0., 0., 0.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curl</span><span class="p">(</span><span class="n">pack_3d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,)),</span><span class="o">-</span><span class="mf">1.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,)),</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,))),</span><span class="n">vecs</span><span class="p">)</span>
<span class="go">array([5., 5., 5., 5.])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.delta">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">delta</code><span class="sig-paren">(</span><em>vectors</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#delta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the finite difference on an arralike.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vectors</strong> (<em>ndarray</em>) – An array of vectors or scalars.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An array of vectors or scalars of shape (n-1,…),
when vectors input have shape (n,…).</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delta</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="go">array([1, 1, 1, 1])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delta</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">92</span><span class="p">]))</span>
<span class="go">array([-1,  4, -3, -2, 90])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delta</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">13</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]))</span>
<span class="go">array([[ -1,   1,   3],</span>
<span class="go">       [  7, -14,   1]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.inclination">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">inclination</code><span class="sig-paren">(</span><em>vectors</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#inclination"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.inclination" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the inclination of vectors.</p>
<p>Calculate the inclination for each individual vector in vectors.
This means this is equivalent to the tilt of the vectors toward
the third dimention.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vectors</strong> (<em>ndarray</em>) – An array of 3d vectors.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An array of scalars, where each is the inclination
of their respective vector in vectors.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inclination</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="go">array([1.10714872, 0.78539816, 0.71469295, 0.68539502, 0.66942998])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
<span class="go">array([0.89442719, 0.70710678, 0.65538554, 0.63297887, 0.62053909])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.map_3d">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">map_3d</code><span class="sig-paren">(</span><em>function</em>, <em>vectors</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#map_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.map_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>map_3d maps a function for 1d data to each dimension in 3d data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>function</strong> (<em>ndarray -&gt; ndarray</em>) – A function that takes a scalar array
and maps it to another scalar array.</li>
<li><strong>vectors</strong> (<em>ndarray</em>) – An array of 3 dimensional vectors.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An array of 3 dimensional vectors.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">map_3d</span><span class="p">(</span><span class="k">lambda</span> <span class="n">xs</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">x</span><span class="o">%</span><span class="mi">4</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">],</span><span class="n">vec</span><span class="p">)</span>
<span class="go">array([[0., 0., 0.],</span>
<span class="go">       [1., 0., 1.],</span>
<span class="go">       [1., 1., 0.],</span>
<span class="go">       [1., 1., 1.],</span>
<span class="go">       [0., 1., 1.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.maybe_keys">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">maybe_keys</code><span class="sig-paren">(</span><em>source</em>, <em>keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#maybe_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.maybe_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new dict, by poping the intersection of source’s keys and keys.</p>
<p>Create a new dictionary. Each pair of key and value comes from source.
Inclusion in the result is based on intersection of source’s keys and keys.
This function has the side-effect that the key-value pairs in the result
are removed from source (poped).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source</strong> (<em>dict</em>) – A dictionary forming the base of the output.
The result is a subset of this dictionary.
There (may) be side-effect on this, of the form that some
key-value pairs (may) be removed.</li>
<li><strong>keys</strong> (<em>iterable</em><em>(</em><em>immutable</em><em>)</em>) – Effectively a list of the keys to extract from source
(though any iterable should do).
The keys do not need to be in source, and only those also
in source will be in the result.</li>
<li><strong>Result</strong> – </li>
<li><strong>------</strong> – </li>
<li><strong>dict</strong> – The dict of key value pairs based on the intersection of
the source’s keys and keys.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;flag&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">,</span><span class="s1">&#39;array&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maybe_keys</span><span class="p">(</span><span class="n">options</span><span class="p">,[</span><span class="s1">&#39;flag&#39;</span><span class="p">])</span>
<span class="go">{&#39;flag&#39;: True}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maybe_keys</span><span class="p">(</span><span class="n">options</span><span class="p">,[</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="s1">&#39;float&#39;</span><span class="p">])</span>
<span class="go">{&#39;int&#39;: 5, &#39;float&#39;: 3.5}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maybe_keys</span><span class="p">(</span><span class="n">options</span><span class="p">,[</span><span class="s1">&#39;flag&#39;</span><span class="p">,</span><span class="s1">&#39;array&#39;</span><span class="p">])</span>
<span class="go">{&#39;flag&#39;: True, &#39;array&#39;: array([0, 1, 2, 3, 4])}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">options</span>
<span class="go">{&#39;flag&#39;: True, &#39;int&#39;: 5, &#39;float&#39;: 3.5, &#39;array&#39;: array([0, 1, 2, 3, 4])}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.maybe_pops">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">maybe_pops</code><span class="sig-paren">(</span><em>source</em>, <em>keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#maybe_pops"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.maybe_pops" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new dict based on the intersection of source keys and keys..</p>
<p>Create a new dictionary. Each pair of key and value comes from source.
Inclusion in the result is based on intersection of source’s keys and keys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source</strong> (<em>dict</em>) – A dictionary forming the base of the output.
The result is a subset of this dictionary.</li>
<li><strong>keys</strong> (<em>iterable</em><em>(</em><em>immutable</em><em>)</em>) – Effectively a list of the keys to extract from source
(though any iterable should do).
The keys do not need to be in source, and only those also
in source will be in the result.</li>
<li><strong>Result</strong> – </li>
<li><strong>------</strong> – </li>
<li><strong>dict</strong> – The dict of key value pairs based on the intersection of
the source’s keys and keys.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;flag&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span><span class="mf">3.5</span><span class="p">,</span><span class="s1">&#39;array&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maybe_pops</span><span class="p">(</span><span class="n">options</span><span class="p">,[</span><span class="s1">&#39;flag&#39;</span><span class="p">])</span>
<span class="go">{&#39;flag&#39;: True}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maybe_pops</span><span class="p">(</span><span class="n">options</span><span class="p">,[</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="s1">&#39;float&#39;</span><span class="p">])</span>
<span class="go">{&#39;int&#39;: 5, &#39;float&#39;: 3.5}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maybe_pops</span><span class="p">(</span><span class="n">options</span><span class="p">,[</span><span class="s1">&#39;flag&#39;</span><span class="p">,</span><span class="s1">&#39;array&#39;</span><span class="p">])</span>
<span class="go">{&#39;array&#39;: array([0, 1, 2, 3, 4])}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">options</span>
<span class="go">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.means">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">means</code><span class="sig-paren">(</span><em>vectors</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#means"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.means" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the means between this and the next point.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vectors</strong> (<em>ndarray</em>) – An array of vectors or scalars.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An array of vectors or scalars of shape (n-1,…),
when vectors input have shape (n,…).</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))))</span>
<span class="go">array([0.5, 1.5, 2.5, 3.5])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">92</span><span class="p">]))</span>
<span class="go">array([ 3.5,  5. ,  5.5,  3. , 47. ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">13</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]))</span>
<span class="go">array([[ 0.5,  0.5,  1.5],</span>
<span class="go">       [ 3.5, -6. ,  3.5]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.pack_3d">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">pack_3d</code><span class="sig-paren">(</span><em>xs</em>, <em>ys</em>, <em>zs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#pack_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.pack_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Pack 3 array-likes into an array of 3d vectors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xs</strong> (<em>array-like</em>) – The first (xs) components of the final vector.
Must be equivalent to an array of scalars,
generators are not accepted (though ranges are).
Must have a reasoable response to len(xs),
which must be the same as len(ys) and len(zs).</li>
<li><strong>ys</strong> (<em>array-like</em>) – The second (ys) components of the final vector.
Must be equivalent to an array of scalars,
generators are not accepted.
Must have a reasoable response to len(ys),
which must be the same as len(xs) and len(zs).</li>
<li><strong>zs</strong> (<em>array-like</em>) – The third (zs) components of the final vector.
Must be equivalent to an array of scalars,
generators are not accepted.
Must have a reasoable response to len(zs),
which must be the same as len(ys) and len(xs).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An array of vectors each with 3 dimensions,
and the same length as xs.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pack_3d</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="o">-</span><span class="mi">3</span><span class="p">,[</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">xs</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="k">for</span> <span class="n">xs</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="go">array([[ 0., -3.,  1.],</span>
<span class="go">       [ 1., -1., -1.],</span>
<span class="go">       [ 2.,  1.,  1.],</span>
<span class="go">       [ 3.,  3., -1.],</span>
<span class="go">       [ 4.,  5.,  1.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.read_cdf">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">read_cdf</code><span class="sig-paren">(</span><em>file</em>, <em>**name_pairings</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#read_cdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.read_cdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from a cdf file.</p>
<p>Read a cdf file and construct a dictionary based on
name_parings. This may open and read a file as a side-effect.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file</strong> (<em>str</em><em> or </em><em>cdfread</em>) – The file to read the data from.
Accepts both a string filepath to the file and an opened cdfread file.</li>
<li><strong>**name_pairings</strong> – Pairs of names used to link a name in the output with its
corrisponding name in the cdf file.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The keys are the keywords used in name_parings,
while the values are the variables loaded from
the cdf file with the name of the corrisponding argument.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>We can directly ask for variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_cdf</span><span class="p">(</span><span class="s1">&#39;tempdata.cdf&#39;</span><span class="p">)</span> <span class="c1"># doctest: +SKIP</span>
<span class="go">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_cdf</span><span class="p">(</span><span class="s1">&#39;tempdata.cdf&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">)</span> <span class="c1"># doctest: +SKIP,+ELLIPSIS</span>
<span class="go">{&#39;time&#39;: array([...])}</span>
</pre></div>
</div>
<p>We can also make use of predefined options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;Timestamp&#39;</span><span class="p">,</span> <span class="s1">&#39;B_base&#39;</span><span class="p">:</span> <span class="s1">&#39;B_NEC&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_cdf</span><span class="p">(</span><span class="s1">&#39;tempdata.cdf&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="c1"># doctest: +SKIP,+ELLIPSIS</span>
<span class="go">{&#39;time&#39;: array([...]), &#39;B_base&#39;: array([[...]])}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These examples are skiped by doctest due to dependency
on the existance of a ‘tempdata.cdf’ file.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.request_data">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">request_data</code><span class="sig-paren">(</span><em>start=datetime.datetime(2016, 1, 1, 0, 0), end=datetime.datetime(2016, 1, 2, 0, 0), user_file='safe_xml.txt', credentials=None, password=None, target_file='tempdata.cdf', filters=[{'parameter': 'Latitude', 'minimum': -90.0, 'maximum': 90.0}], target_url='https://staging.viresdisc.vires.services/openows', collection='SW_OPER_MAGA_LR_1B', product_options={'auxiliaries': ['QDLat', 'QDLon']}, sampling_step='PT1S', models=['MCO_SHA_2C', 'MLI_SHA_2C', 'MMA_SHA_2C-Primary', 'MMA_SHA_2C-Secondary'], measurements=['F', 'B_NEC']</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#request_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.request_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Request data from a vires server.</p>
<p>This function sets up a request to a vires server.
It is a wrapper on viresclient functionality,
where default arguments have been provided.</p>
<p>The data will be saved to as a cdf file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> (<em>datatime</em><em>, </em><em>optional</em>) – The inclusive starting time of the requested data.
Defaults to 1st of Janurary 2016</li>
<li><strong>end</strong> (<em>datetime</em><em>, </em><em>optional</em>) – The exclusive end time of the requested data.
Defaults to 2nd of Janurary 2016</li>
<li><strong>user_file</strong> (<em>str</em><em>, </em><em>optional</em>) – Filepath to the safe_user encrypted file with login credentials.
If set to None you will be prompted for login credentials in runtime.
Defaults to ‘safe_xml.txt’</li>
<li><strong>password</strong> (<em>str</em><em>, </em><em>optional</em>) – The password needed to decrypt user_file.
If not provided/set to None you will be prompted for it in runtime.</li>
<li><strong>target_file</strong> (<em>str</em><em>, </em><em>optional</em>) – Filepath for the output cdf file. Must include name and extension.
Defaults to ‘tempdata.cdf’</li>
<li><strong>filters</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em><em>, </em><em>optional</em>) – A list of dictionaries, where each dictionary is the options
for a filter to be applied to the data.</li>
<li><strong>target_url</strong> (<em>str</em><em>, </em><em>optional</em>) – The full url for the server to request the data at.
Defaults to ‘<a class="reference external" href="https://staging.viresdisc.vires.services/openows">https://staging.viresdisc.vires.services/openows</a>’</li>
<li><strong>collection</strong> (<em>str</em><em>, </em><em>optional</em>) – See viresclient set_collection. Defaults to ‘SW_OPER_MAGA_LR_1B’.</li>
<li><strong>product_options</strong> (<em>dict</em><em>, </em><em>optional</em>) – Extra options to viresclient set_products.
Defaults to {‘auxiliaries’: [‘QDLat’, ‘QDLon’]}</li>
<li><strong>sampling_step</strong> (<em>str</em><em>, </em><em>optional</em>) – Describes the sampling frequency,
since vires may otherwise downsample the data.
The default is 1Hz by ‘PT1S’.</li>
<li><strong>models</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – The models calculated at the data points.
See viresclient set_products models for details.
Defaults to [
‘MCO_SHA_2C’, ‘MLI_SHA_2C’,
‘MMA_SHA_2C-Primary’, ‘MMA_SHA_2C-Secondary’]</li>
<li><strong>measurements</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – Measured quantities to be included for each data point.
Defaults to [‘F’, ‘B_NEC’]</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request_data</span><span class="p">()</span> <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request_data</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>             <span class="n">date</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span><span class="c1"># doctest: +SKIP</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These examples are skiped by doctest due to security reasons,
and unintentional side-effects.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="swarmpyfac.utils.spherical_delta">
<code class="descclassname">swarmpyfac.utils.</code><code class="descname">spherical_delta</code><span class="sig-paren">(</span><em>positions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/swarmpyfac/utils.html#spherical_delta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#swarmpyfac.utils.spherical_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the change of sherical positions as a NEC vector.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>positions</strong> (<em>ndarray</em>) – An array of positions (3d vectors) described in spherical coordinates.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>ndarray</strong> – An array of vectors in the NEC frame.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">ndarray</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyfac.utils</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># doctest: +SKIP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spherical_delta</span><span class="p">(</span><span class="n">vecs</span><span class="p">)</span>
<span class="go">array([[ 0.18317585,  0.18311308, -3.        ],</span>
<span class="go">       [ 0.34018372,  0.33913504, -3.        ],</span>
<span class="go">       [ 0.49719158,  0.49293804, -3.        ],</span>
<span class="go">       [ 0.65419945,  0.64324482, -3.        ]])</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API Reference</a><ul>
<li><a class="reference internal" href="#module-swarmpyfac.fac">swarmpyfac.fac module</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swarmpyfac.safety">swarmpyfac.safety module</a><ul>
<li><a class="reference internal" href="#guide">Guide</a></li>
<li><a class="reference internal" href="#xml">XML</a></li>
<li><a class="reference internal" href="#padding">Padding</a></li>
<li><a class="reference internal" href="#encryption">Encryption</a></li>
<li><a class="reference internal" href="#boxing">Boxing</a></li>
<li><a class="reference internal" href="#locking">Locking</a></li>
<li><a class="reference internal" href="#other">Other</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swarmpyfac.utils">swarmpyfac.utils module</a><ul>
<li><a class="reference internal" href="#higher-order-functions">Higher Order Functions</a></li>
<li><a class="reference internal" href="#array-utilities">Array Utilities</a></li>
<li><a class="reference internal" href="#viresclient">Viresclient</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="usage.html"
                        title="previous chapter">Usage</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="changelog.html"
                        title="next chapter">Changelog</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/reference.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             >next</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SwarmPyFAC 0.1.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Ask Neve Gamby.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>